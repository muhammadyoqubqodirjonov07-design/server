<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Security Server Dashboard</title>
<style>
    :root {
        --primary: #1a237e;
        --secondary: #283593;
        --danger: #d32f2f;
        --warning: #ff9800;
        --success: #388e3c;
        --info: #0288d1;
        --dark: #121212;
        --light: #f5f5f5;
        --gray: #424242;
        --border: #37474f;
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Consolas', 'Monaco', monospace;
    }

    body {
        background: var(--dark);
        color: var(--light);
        min-height: 100vh;
        overflow-x: hidden;
    }

    .container {
        display: flex;
        min-height: 100vh;
    }

    /* Sidebar */
    .sidebar {
        width: 250px;
        background: var(--primary);
        border-right: 1px solid var(--border);
        position: fixed;
        height: 100vh;
        overflow-y: auto;
        z-index: 1000;
    }

    .logo {
        padding: 20px;
        text-align: center;
        border-bottom: 1px solid var(--border);
        background: var(--secondary);
    }

    .logo h2 {
        color: #4fc3f7;
        font-size: 22px;
    }

    .nav {
        padding: 20px 0;
    }

    .nav-item {
        display: flex;
        align-items: center;
        padding: 15px 20px;
        color: #bbdefb;
        text-decoration: none;
        border-left: 4px solid transparent;
        transition: all 0.3s;
        cursor: pointer;
    }

    .nav-item:hover {
        background: rgba(255, 255, 255, 0.1);
        color: white;
        border-left-color: #4fc3f7;
    }

    .nav-item.active {
        background: rgba(255, 255, 255, 0.15);
        color: white;
        border-left-color: #4fc3f7;
        font-weight: bold;
    }

    .nav-icon {
        margin-right: 10px;
        font-size: 18px;
    }

    /* Main Content */
    .main-content {
        flex: 1;
        margin-left: 250px;
        padding: 20px;
    }

    /* Top Bar */
    .top-bar {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 0;
        border-bottom: 1px solid var(--border);
        margin-bottom: 30px;
    }

    .user-info {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .user-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: var(--info);
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
    }

    .status-indicator {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: var(--success);
        margin-left: 5px;
    }

    .status-indicator.offline {
        background: var(--danger);
    }

    /* Stats Cards */
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }

    .stat-card {
        background: var(--gray);
        padding: 20px;
        border-radius: 8px;
        border-left: 5px solid var(--info);
        transition: transform 0.3s;
    }

    .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }

    .stat-card.danger { border-left-color: var(--danger); }
    .stat-card.warning { border-left-color: var(--warning); }
    .stat-card.success { border-left-color: var(--success); }

    .stat-value {
        font-size: 32px;
        font-weight: bold;
        margin: 10px 0;
    }

    .stat-label {
        color: #b0bec5;
        font-size: 14px;
    }

    /* System Monitor */
    .monitor-grid {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 20px;
        margin-bottom: 30px;
    }

    .monitor-card {
        background: var(--gray);
        border-radius: 8px;
        overflow: hidden;
    }
    .card-header {
        background: var(--secondary);
        padding: 15px;
        border-bottom: 1px solid var(--border);
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .card-title {
        color: #4fc3f7;
        font-size: 18px;
    }

    .card-body {
        padding: 20px;
    }

    /* Connection Graph */
    .graph {
        height: 200px;
        position: relative;
        margin-top: 20px;
    }

    .graph-line {
        position: absolute;
        bottom: 0;
        width: 100%;
        height: 1px;
        background: var(--border);
    }

    .graph-bar {
        position: absolute;
        bottom: 0;
        width: 10px;
        background: var(--info);
        border-radius: 3px 3px 0 0;
        transition: height 0.3s;
    }

    /* Log Table */
    .log-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
    }

    .log-table th,
    .log-table td {
        padding: 12px;
        text-align: left;
        border-bottom: 1px solid var(--border);
    }

    .log-table th {
        background: var(--secondary);
        color: #4fc3f7;
        font-weight: bold;
    }

    .log-table tr:hover {
        background: rgba(255, 255, 255, 0.05);
    }

    .status-badge {
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 12px;
        font-weight: bold;
    }

    .status-success { background: rgba(56, 142, 60, 0.2); color: #4caf50; }
    .status-warning { background: rgba(255, 152, 0, 0.2); color: #ff9800; }
    .status-danger { background: rgba(211, 47, 47, 0.2); color: #f44336; }
    .status-info { background: rgba(2, 136, 209, 0.2); color: #03a9f4; }

    /* Firewall Rules */
    .rules-list {
        list-style: none;
    }

    .rule-item {
        padding: 10px;
        margin: 5px 0;
        background: rgba(255, 255, 255, 0.05);
        border-left: 3px solid var(--info);
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .rule-item.blocked { border-left-color: var(--danger); }
    .rule-item.allowed { border-left-color: var(--success); }

    /* Terminal */
    .terminal {
        background: #000;
        border-radius: 8px;
        padding: 20px;
        font-family: 'Courier New', monospace;
        height: 300px;
        overflow-y: auto;
        margin-top: 20px;
    }

    .terminal-line {
        margin-bottom: 5px;
        line-height: 1.4;
    }

    .terminal-command { color: #4fc3f7; }
    .terminal-response { color: #a5d6a7; }
    .terminal-error { color: #ef9a9a; }
    .terminal-prompt { color: #ffcc80; }

    /* Controls */
    .controls {
        display: flex;
        gap: 10px;
        margin-top: 20px;
    }

    .btn {
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-weight: bold;
        transition: opacity 0.3s;
        display: flex;
        align-items: center;
        gap: 5px;
    }

    .btn:hover { opacity: 0.9; }
    .btn-primary { background: var(--primary); color: white; }
    .btn-danger { background: var(--danger); color: white; }
    .btn-success { background: var(--success); color: white; }
    .btn-warning { background: var(--warning); color: white; }

    /* Modal */
    .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        z-index: 2000;
        align-items: center;
        justify-content: center;
    }

    .modal.show { display: flex; }

    .modal-content {
        background: var(--gray);
        width: 90%;
        max-width: 600px;
        border-radius: 8px;
        overflow: hidden;
    }

    .modal-header {
        background: var(--secondary);
        padding: 20px;
        border-bottom: 1px solid var(--border);
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .modal-body {
        padding: 20px;
    }
    .modal-footer {
        padding: 20px;
        background: rgba(0, 0, 0, 0.2);
        display: flex;
        justify-content: flex-end;
        gap: 10px;
    }

    /* Form Elements */
    .form-group {
        margin-bottom: 15px;
    }

    .form-label {
        display: block;
        margin-bottom: 5px;
        color: #b0bec5;
    }

    .form-input {
        width: 100%;
        padding: 10px;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid var(--border);
        border-radius: 4px;
        color: white;
    }

    .form-input:focus {
        outline: none;
        border-color: var(--info);
    }

    /* Alert */
    .alert {
        padding: 15px;
        border-radius: 4px;
        margin: 10px 0;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .alert-success { background: rgba(56, 142, 60, 0.2); border-left: 4px solid var(--success); }
    .alert-danger { background: rgba(211, 47, 47, 0.2); border-left: 4px solid var(--danger); }
    .alert-warning { background: rgba(255, 152, 0, 0.2); border-left: 4px solid var(--warning); }

    /* Responsive */
    @media (max-width: 768px) {
        .sidebar {
            width: 100%;
            height: auto;
            position: relative;
        }
        
        .main-content {
            margin-left: 0;
        }
        
        .monitor-grid {
            grid-template-columns: 1fr;
        }
        
        .stats-grid {
            grid-template-columns: 1fr;
        }
    }
</style>
</head>
<body>

<div class="container">
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="logo">
            <h2>üîí SECURE SERVER</h2>
        </div>
        
        <div class="nav">
            <a class="nav-item active">
                <span class="nav-icon">üìä</span>
                Dashboard
            </a>
            <a class="nav-item">
                <span class="nav-icon">üõ°Ô∏è</span>
                Firewall
            </a>
            <a class="nav-item">
                <span class="nav-icon">üîç</span>
                Log Monitor
            </a>
            <a class="nav-item">
                <span class="nav-icon">‚ö°</span>
                Performance
            </a>
            <a class="nav-item">
                <span class="nav-icon">üîê</span>
                Security
            </a>
            <a class="nav-item">
                <span class="nav-icon">üîÑ</span>
                Backups
            </a>
            <a class="nav-item">
                <span class="nav-icon">üö®</span>
                Alerts
            </a>
            <a class="nav-item">
                <span class="nav-icon">üñ•Ô∏è</span>
                Terminal
            </a>
            <a class="nav-item">
                <span class="nav-icon">‚öôÔ∏è</span>
                Settings
            </a>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Top Bar -->
        <div class="top-bar">
            <div>
                <h1>Server Security Dashboard</h1>
                <p>Real-time monitoring and control panel</p>
            </div>
            
            <div class="user-info">
                <div class="user-avatar">AD</div>
                <div>
                    <div>Admin Qodirjonov</div>
                    <div style="font-size: 12px; color: #b0bec5;">Last login: 5 min ago</div>
                </div>
                <div class="status-indicator"></div>
            </div>
        </div>

        <!-- Stats Grid -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-label">CPU Usage</div>
                <div class="stat-value" id="cpuUsage">24%</div>
                <div style="font-size: 12px;">Load: 1.2 / 8 cores</div>
                </div>
            
            <div class="stat-card">
                <div class="stat-label">Memory</div>
                <div class="stat-value" id="memoryUsage">3.2GB</div>
                <div style="font-size: 12px;">Total: 8GB | Free: 4.8GB</div>
            </div>
            
            <div class="stat-card danger">
                <div class="stat-label">Active Threats</div>
                <div class="stat-value" id="activeThreats">2</div>
                <div style="font-size: 12px;">Blocked today: 147</div>
            </div>
            
            <div class="stat-card success">
                <div class="stat-label">Uptime</div>
                <div class="stat-value" id="uptime">99.7%</div>
                <div style="font-size: 12px;">45 days 12:34:21</div>
            </div>
        </div>

        <!-- Monitor Grid -->
        <div class="monitor-grid">
            <!-- Connection Monitor -->
            <div class="monitor-card">
                <div class="card-header">
                    <div class="card-title">üåê Network Connections</div>
                    <button class="btn btn-primary" onclick="refreshConnections()">Refresh</button>
                </div>
                <div class="card-body">
                    <div class="graph" id="connectionsGraph">
                        <!-- Graph bars will be generated by JS -->
                    </div>
                    <table class="log-table">
                        <thead>
                            <tr>
                                <th>IP Address</th>
                                <th>Port</th>
                                <th>Status</th>
                                <th>Traffic</th>
                            </tr>
                        </thead>
                        <tbody id="connectionsTable">
                            <!-- Connections will be loaded here -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- System Status -->
            <div class="monitor-card">
                <div class="card-header">
                    <div class="card-title">üìà System Status</div>
                </div>
                <div class="card-body">
                    <div class="rules-list" id="firewallRules">
                        <!-- Rules will be loaded here -->
                    </div>
                    
                    <div class="controls">
                        <button class="btn btn-success" onclick="startService('firewall')">
                            <span>‚ñ∂Ô∏è</span> Start Firewall
                        </button>
                        <button class="btn btn-warning" onclick="restartService('firewall')">
                            <span>üîÑ</span> Restart
                        </button>
                        <button class="btn btn-danger" onclick="stopService('firewall')">
                            <span>‚èπÔ∏è</span> Stop
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Log Monitor -->
        <div class="monitor-card">
            <div class="card-header">
                <div class="card-title">üìã Security Logs</div>
                <div class="controls">
                    <button class="btn btn-primary" onclick="clearLogs()">
                        <span>üóëÔ∏è</span> Clear
                    </button>
                    <button class="btn btn-warning" onclick="exportLogs()">
                        <span>üì§</span> Export
                    </button>
                </div>
            </div>
            <div class="card-body">
                <table class="log-table">
                    <thead>
                        <tr>
                            <th>Time</th>
                            <th>Event</th>
                            <th>Source IP</th>
                            <th>Severity</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody id="securityLogs">
                        <!-- Logs will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Terminal -->
        <div class="monitor-card">
            <div class="card-header">
                <div class="card-title">üñ•Ô∏è Server Terminal</div>
            </div>
            <div class="card-body">
                <div class="terminal" id="terminal">
                    <!-- Terminal output will be here -->
                </div>
                <div style="display: flex; margin-top: 10px;">
                    <input type="text" id="terminalInput" class="form-input" placeholder="Enter command..." 
                           onkeypress="handleTerminalCommand(event)" style="flex: 1;">
                    <button class="btn btn-primary" onclick="executeTerminalCommand()">Execute</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal for Settings -->
<div class="modal" id="settingsModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Server Settings</h3>
            <button onclick="closeModal()" style="background: none; border: none; color: white; font-size: 20px; cursor: pointer;">√ó</button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label class="form-label">Server Name</label>
                <input type="text" class="form-input" value="Main Server">
            </div>
            <div class="form-group">
                <label class="form-label">Max Connections</label>
                <input type="number" class="form-input" value="1000">
            </div>
            <div class="form-group">
                <label class="form-label">Auto Backup</label>
                <select class="form-input">
                    <option>Every 6 hours</option>
                    <option>Every 12 hours</option>
                    <option>Daily</option>
                    <option>Weekly</option>
                </select>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-warning" onclick="closeModal()">Cancel</button>
            <button class="btn btn-success" onclick="saveSettings()">Save</button>
        </div>
    </div>
</div>

<script>
// Mock server data
const mockData = {
    cpu: [24, 32, 18, 45, 28, 35, 40, 22],
    memory: 3.2,
    threats: 2,
    uptime: '45 days 12:34:21',
    connections: [
        { ip: '192.168.1.100', port: 22, status: 'active', traffic: '1.2MB/s' },
        { ip: '10.0.0.5', port: 80, status: 'active', traffic: '450KB/s' },
        { ip: '172.16.0.3', port: 443, status: 'blocked', traffic: '0B/s' },
        { ip: '185.220.101.4', port: 3389, status: 'blocked', traffic: '0B/s' },
        { ip: '192.168.1.150', port: 21, status: 'active', traffic: '2.1MB/s' }
    ],
    firewallRules: [
        { type: 'allow', ip: '192.168.1.0/24', port: 'any', protocol: 'TCP/UDP' },
        { type: 'block', ip: '0.0.0.0/0', port: '22', protocol: 'TCP' },
        { type: 'allow', ip: '10.0.0.0/8', port: '80,443', protocol: 'TCP' },
        { type: 'block', ip: '185.220.101.0/24', port: 'any', protocol: 'any' }
    ],
    logs: []
};

// Init
function initDashboard() {
    updateStats();
    renderGraph();
    renderConnections();
    renderFirewallRules();
    renderLogs();
    initTerminal();
    startLiveUpdates();
}

// Stats
function updateStats() {
    document.getElementById('cpuUsage').textContent =
        Math.floor(Math.random() * 40 + 10) + '%';
    document.getElementById('memoryUsage').textContent =
        (Math.random() * 2 + 2.5).toFixed(1) + 'GB';
    document.getElementById('activeThreats').textContent =
        Math.floor(Math.random() * 5);
}

// Graph
function renderGraph() {
    const graph = document.getElementById('connectionsGraph');
    graph.innerHTML = '';

    for (let i = 0; i < 24; i++) {
        const bar = document.createElement('div');
        bar.className = 'graph-bar';
        bar.style.left = (i * 30 + 5) + 'px';
        bar.style.height = (Math.random() * 150 + 20) + 'px';
        bar.style.backgroundColor = i > 18 ? '#d32f2f' : '#0288d1';
        graph.appendChild(bar);
    }
}

// Connections
function renderConnections() {
    const table = document.getElementById('connectionsTable');
    table.innerHTML = '';

    mockData.connections.forEach(function (conn) {
        const row = document.createElement('tr');
        row.innerHTML =
            '<td>' + conn.ip + '</td>' +
            '<td>' + conn.port + '</td>' +
            '<td><span class="status-badge ' +
            (conn.status === 'active' ? 'status-success' : 'status-danger') +
            '">' + conn.status.toUpperCase() + '</span></td>' +
            '<td>' + conn.traffic + '</td>';
        table.appendChild(row);
    });
}

// Firewall
function renderFirewallRules() {
    const list = document.getElementById('firewallRules');
    list.innerHTML = '';

    mockData.firewallRules.forEach(function (rule) {
        const item = document.createElement('li');
        item.className = 'rule-item ' + (rule.type === 'block' ? 'blocked' : 'allowed');
        item.innerHTML =
            '<div><strong>' + rule.type.toUpperCase() + '</strong>' +
            '<div style="font-size:12px;">' +
            rule.ip + ':' + rule.port + ' (' + rule.protocol + ')' +
            '</div></div>' +
            '<button class="btn btn-danger" onclick="deleteRule(\'' + rule.ip + '\')">Delete</button>';
        list.appendChild(item);
    });
}

// Logs
function renderLogs() {
    const table = document.getElementById('securityLogs');
    table.innerHTML = '';

    mockData.logs.forEach(function (log) {
        const row = document.createElement('tr');
        row.innerHTML =
            '<td>' + log.time + '</td>' +
            '<td>' + log.event + '</td>' +
            '<td>' + log.ip + '</td>' +
            '<td>' + log.severity.toUpperCase() + '</td>' +
            '<td>' + log.action + '</td>';
        table.appendChild(row);
    });
}

// Terminal
function initTerminal() {
    document.getElementById('terminal').innerHTML =
        '<div>root@server:~$ Welcome to Secure Server Terminal</div>';
}

// Alerts
function showAlert(message, type) {
    alert(type.toUpperCase() + ': ' + message);
}
// Live updates
function startLiveUpdates() {
    setInterval(function () {
        updateStats();
    }, 5000);
}

// Start
document.addEventListener('DOMContentLoaded', initDashboard);
</script>

</body>
</html>